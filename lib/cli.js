"use strict";var _index=_interopRequireDefault(require("./index")),_chalk=_interopRequireDefault(require("chalk"));function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}function _toConsumableArray(a){return _arrayWithoutHoles(a)||_iterableToArray(a)||_unsupportedIterableToArray(a)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(a,b){if(a){if("string"==typeof a)return _arrayLikeToArray(a,b);var c=Object.prototype.toString.call(a).slice(8,-1);return"Object"===c&&a.constructor&&(c=a.constructor.name),"Map"===c||"Set"===c?Array.from(a):"Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?_arrayLikeToArray(a,b):void 0}}function _iterableToArray(a){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(a))return Array.from(a)}function _arrayWithoutHoles(a){if(Array.isArray(a))return _arrayLikeToArray(a)}function _arrayLikeToArray(a,b){(null==b||b>a.length)&&(b=a.length);for(var c=0,d=Array(b);c<b;c++)d[c]=a[c];return d}// Este sera el archivo que contendra la funcion a ejecutarse en el CLI
var linksStats=function(a,b){var c=a.length,d=a.map(function(a){var b=a.href;return b}),e=_toConsumableArray(new Set(d)).length,f=b&&a.filter(function(a){var b=a.statusText;return"FAIL"===b}),g=Array.isArray(f)?f.length:0,h=_chalk["default"].green("\u2714 Total : ".concat(c,"\n\u2714 Unique : ").concat(e));console.log(b?"".concat(h,"\n").concat(_chalk["default"].red("\u2716 Broken : ".concat(g))):h)},cli=function(a,b){a?(0,_index["default"])(a,b).then(function(c){Array.isArray(c)&&!!b&&b.validate?b.stats?linksStats(c,!0):c.forEach(function(b){var c=b.href,d=b.status,e=b.statusText,f=b.text;console.log("".concat(_chalk["default"].yellow(a)," ").concat(_chalk["default"].cyan(c)," ").concat(_chalk["default"].magenta(e)," ").concat(_chalk["default"].magenta(d)," ").concat(_chalk["default"].blue(f)))}):Array.isArray(c)&&!!b&&b.stats?linksStats(c):c.forEach(function(b){var c=b.href,d=b.text;return console.log("\u2A2D ".concat(_chalk["default"].yellow.underline(a)," \uD83E\uDC72 ").concat(_chalk["default"].cyanBright(c),"...").concat(_chalk["default"].blue(d)))})})["catch"](function(){return console.log("\n".concat(_chalk["default"].rgb(227,13,219).bold("---> PLEASE CHECK THE PATH (is wrong or there`rnt links into .md)-->")," ").concat(_chalk["default"].bgRgb(227,13,219).yellow.bold(a),"\n "))}):(console.error("\n".concat(_chalk["default"].bgYellow.rgb(112,19,147).bold("\uD83E\uDC72  Please specify the path:  "))),console.log("  ".concat(_chalk["default"].cyan("yp-mdlinks")," ").concat(_chalk["default"].yellow.bold("<path>"),"\n")),console.log("\n".concat(_chalk["default"].bgYellow.rgb(112,19,147).bold("\uD83E\uDC72  For example:  "))),console.log("  ".concat(_chalk["default"].cyan("yp-mdlinks")," ").concat(_chalk["default"].yellow.bold("md_directory"))),console.log("  ".concat(_chalk["default"].cyan("yp-mdlinks")," ").concat(_chalk["default"].yellow.bold("README.md"),"\n")),console.log("".concat(_chalk["default"].bgYellow.rgb(112,19,147).bold("\uD83E\uDC72  Run  ")).concat(_chalk["default"].cyan("\n".concat("  yp-mdlinks"," --help"))," ").concat(_chalk["default"].yellow.bold("for info "),"\n")))};// Definimos una funcion principal que ejecutara mdLinks
module.exports=cli;